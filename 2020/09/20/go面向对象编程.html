<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Go面向对象编程 - Stitch&#039;s Blog</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="Stitch&#039;s Blog"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="Stitch&#039;s Blog"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="Is Go an object-oriented language?  Yes and no. Although Go has types and methods and allows an object oriented style of programming, there is no type hierarchy. The concept of “interface” in Go provi"><meta property="og:type" content="blog"><meta property="og:title" content="Go面向对象编程"><meta property="og:url" content="https://stitch.cn/2020/09/20/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B.html"><meta property="og:site_name" content="Stitch&#039;s Blog"><meta property="og:description" content="Is Go an object-oriented language?  Yes and no. Although Go has types and methods and allows an object oriented style of programming, there is no type hierarchy. The concept of “interface” in Go provi"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://qiniu.gaobinzhan.com/2020/05/17/234f907d27e94.png"><meta property="og:image" content="http://qiniu.gaobinzhan.com/2020/05/17/b2c005524c89d.png"><meta property="og:image" content="http://qiniu.gaobinzhan.com/2020/05/17/87e5943515174.png"><meta property="og:image" content="http://qiniu.gaobinzhan.com/2020/05/17/f8ba0c6a8e958.png"><meta property="article:published_time" content="2020-09-20T17:52:10.000Z"><meta property="article:modified_time" content="2021-10-01T03:34:17.844Z"><meta property="article:author" content="stitch"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://qiniu.gaobinzhan.com/2020/05/17/234f907d27e94.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://stitch.cn/2020/09/20/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B.html"},"headline":"Go面向对象编程","image":["http://qiniu.gaobinzhan.com/2020/05/17/234f907d27e94.png","http://qiniu.gaobinzhan.com/2020/05/17/b2c005524c89d.png","http://qiniu.gaobinzhan.com/2020/05/17/87e5943515174.png","http://qiniu.gaobinzhan.com/2020/05/17/f8ba0c6a8e958.png"],"datePublished":"2020-09-20T17:52:10.000Z","dateModified":"2021-10-01T03:34:17.844Z","author":{"@type":"Person","name":"stitch"},"publisher":{"@type":"Organization","name":"Stitch's Blog","logo":{"@type":"ImageObject","url":{"text":"Stitch's Blog"}}},"description":"Is Go an object-oriented language?  Yes and no. Although Go has types and methods and allows an object oriented style of programming, there is no type hierarchy. The concept of “interface” in Go provi"}</script><link rel="canonical" href="https://stitch.cn/2020/09/20/go%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B.html"><link rel="alternate" href="/atom.xml" title="Stitch&#039;s Blog" type="application/atom+xml"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><meta name="generator" content="Hexo 5.4.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">Stitch&#039;s Blog</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">主页</a><a class="navbar-item" href="/archives">文章</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-09-20T17:52:10.000Z" title="9/20/2020, 5:52:10 PM">2020-09-20</time>发表</span><span class="level-item"><time dateTime="2021-10-01T03:34:17.844Z" title="10/1/2021, 3:34:17 AM">2021-10-01</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/uncategorized/">uncategorized</a></span><span class="level-item">8 分钟读完 (大约1223个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Go面向对象编程</h1><div class="content"><p><strong>Is Go an object-oriented language?</strong></p>
<blockquote>
<p><strong>Yes and no</strong>. Although Go has types and methods and allows an object</p>
<p>oriented style of programming, there is <strong>no type hierarchy</strong>. <strong>The concept</strong></p>
<p><strong>of “interface” in Go provides a different approach that we believe is</strong></p>
<p><strong>easy to use and in some ways more general.</strong></p>
<p>Also, the lack of a type hierarchy makes “objects” in Go feel much more</p>
<p>lightweight than in languages such as C++ or Java.</p>
</blockquote>
<h2 id="行为的定义和实现"><a href="#行为的定义和实现" class="headerlink" title="行为的定义和实现"></a>行为的定义和实现</h2><p>结构体定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">type Employee struct &#123;</span><br><span class="line">    Id   string</span><br><span class="line">    Name string</span><br><span class="line">    Age  int</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实例创建及初始化：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">func TestCreateEmployee(t *testing.T) &#123;</span><br><span class="line">    e := Employee&#123;&quot;0&quot;, &quot;Bob&quot;, 20&#125;         // 分别把值放进去</span><br><span class="line">    e1 := Employee&#123;Name: &quot;Mike&quot;, Age: 30&#125; // 指定某个field的值</span><br><span class="line">    e2 := new(Employee)                   // new关键字 去创建指向实例的指针 这里返回的引用/指针 相当于 e:=Employee&#123;&#125;</span><br><span class="line">    e2.Id = &quot;2&quot;                           // 通过 example.filed 去赋值</span><br><span class="line">    e2.Name = &quot;Rose&quot;</span><br><span class="line">    e2.Age = 22</span><br><span class="line">    t.Log(e)</span><br><span class="line">    t.Log(e1)</span><br><span class="line">    t.Log(e1.Id)</span><br><span class="line">    t.Log(e2)</span><br><span class="line">    t.Logf(&quot;e is %T&quot;, e)</span><br><span class="line">    t.Logf(&quot;e2 is %T&quot;, e2)</span><br><span class="line">    /** 运行结果：</span><br><span class="line">    === RUN   TestCreateEmployee</span><br><span class="line">        TestCreateEmployee: encap_test.go:18: &#123;0 Bob 20&#125;</span><br><span class="line">        TestCreateEmployee: encap_test.go:19: &#123; Mike 30&#125;</span><br><span class="line">        TestCreateEmployee: encap_test.go:20:</span><br><span class="line">        TestCreateEmployee: encap_test.go:21: &amp;&#123;2 Rose 22&#125;</span><br><span class="line">        TestCreateEmployee: encap_test.go:22: e is test.Employee</span><br><span class="line">        TestCreateEmployee: encap_test.go:23: e2 is *test.Employee</span><br><span class="line">    --- PASS: TestCreateEmployee (0.00s)</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>行为定义：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 第一种定义方式在实例对应方法被调用时，实例的成员会进行值复制</span><br><span class="line">func (e Employee) String() string &#123;</span><br><span class="line">    return fmt.Sprintf(&quot;ID:%s-Name:%s-Age:%d&quot;, e.Id, e.Name, e.Age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestStructOperations(t *testing.T) &#123;</span><br><span class="line">    e := Employee&#123;&quot;0&quot;, &quot;Bob&quot;, 20&#125;</span><br><span class="line">    t.Log(e.String())</span><br><span class="line">    /** 运行结果：</span><br><span class="line">    === RUN   TestStructOperations</span><br><span class="line">        TestStructOperations: encap_test.go:46: ID:0-Name:Bob-Age:20</span><br><span class="line">    --- PASS: TestStructOperations (0.00s)</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 通常情况下为了避免内存拷贝我们使用第二种定义方式</span><br><span class="line">func (e *Employee) String() string &#123;</span><br><span class="line">    return fmt.Sprintf(&quot;ID:%s/Name:%s/Age:%d&quot;, e.Id, e.Name, e.Age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestStructOperations(t *testing.T) &#123;</span><br><span class="line">    e := Employee&#123;&quot;0&quot;, &quot;Bob&quot;, 20&#125;</span><br><span class="line">    t.Log(e.String())</span><br><span class="line">    /** 运行结果：</span><br><span class="line">    === RUN   TestStructOperations</span><br><span class="line">        TestStructOperations: encap_test.go:51: ID:0/Name:Bob/Age:20</span><br><span class="line">    --- PASS: TestStructOperations (0.00s)</span><br><span class="line">    */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>在Go语言中不管通过指针访问还是通过实例访问，都是一样的</p>
<p>那么这两种定义没有区别吗？？</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func (e *Employee) String() string &#123;</span><br><span class="line">    fmt.Printf(&quot;Address is %x \n&quot;, unsafe.Pointer(&amp;e.Name))</span><br><span class="line">    return fmt.Sprintf(&quot;ID:%s/Name:%s/Age:%d&quot;, e.Id, e.Name, e.Age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestStructOperations(t *testing.T) &#123;</span><br><span class="line">    e := Employee&#123;&quot;0&quot;, &quot;Bob&quot;, 20&#125;</span><br><span class="line">    fmt.Printf(&quot;Address is %x \n&quot;, unsafe.Pointer(&amp;e.Name))</span><br><span class="line">    t.Log(e.String())</span><br><span class="line">    /** 运行结果：</span><br><span class="line">    === RUN   TestStructOperations</span><br><span class="line">    Address is c000060370</span><br><span class="line">    Address is c000060370</span><br><span class="line">        TestStructOperations: encap_test.go:54: ID:0/Name:Bob/Age:20</span><br><span class="line">    --- PASS: TestStructOperations (0.00s)</span><br><span class="line">    */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以发现两个地址一致</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func (e Employee) String() string &#123;</span><br><span class="line">    fmt.Printf(&quot;Address is %x \n&quot;, unsafe.Pointer(&amp;e.Name))</span><br><span class="line">    return fmt.Sprintf(&quot;ID:%s-Name:%s-Age:%d&quot;, e.Id, e.Name, e.Age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestStructOperations(t *testing.T) &#123;</span><br><span class="line">    e := Employee&#123;&quot;0&quot;, &quot;Bob&quot;, 20&#125;</span><br><span class="line">    fmt.Printf(&quot;Address is %x \n&quot;, unsafe.Pointer(&amp;e.Name))</span><br><span class="line">    t.Log(e.String())</span><br><span class="line">    /** 运行结果：</span><br><span class="line">    === RUN   TestStructOperations</span><br><span class="line">    Address is c000092370</span><br><span class="line">    Address is c0000923a0</span><br><span class="line">        TestStructOperations: encap_test.go:55: ID:0-Name:Bob-Age:20</span><br><span class="line">    --- PASS: TestStructOperations (0.00s)</span><br><span class="line">    */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这时候两个地址不一致，说明结构体的数据被复制了，会造成开销</p>
<h2 id="Go语言的相关接口"><a href="#Go语言的相关接口" class="headerlink" title="Go语言的相关接口"></a>Go语言的相关接口</h2><p>Java的接口与依赖：</p>
<p><img src="http://qiniu.gaobinzhan.com/2020/05/17/234f907d27e94.png"></p>
<p>Go的 Duck Type 式接口实现：</p>
<ul>
<li>  接口为非入侵性，实现不依赖与接口定义</li>
<li>  所以接口的定义可以包含在接口使用者包内</li>
</ul>
<p><img src="http://qiniu.gaobinzhan.com/2020/05/17/b2c005524c89d.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">type Programmer interface &#123;</span><br><span class="line">    WriteHelloWorld() string</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type GoProgrammer struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (g *GoProgrammer) WriteHelloWorld() string &#123;</span><br><span class="line">    return &quot;Hello World&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestClient(t *testing.T) &#123;</span><br><span class="line">    var p Programmer</span><br><span class="line">    p = new(GoProgrammer)</span><br><span class="line">    t.Log(p.WriteHelloWorld())</span><br><span class="line">    /** 运行结果：</span><br><span class="line">    === RUN   TestClient</span><br><span class="line">        TestClient: interface_test.go:19: Hello World</span><br><span class="line">    --- PASS: TestClient (0.00s)</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接口变量：</p>
<p><img src="http://qiniu.gaobinzhan.com/2020/05/17/87e5943515174.png"></p>
<p>自定义类型：</p>
<ul>
<li>  type IntConvertionFn func(n int) int</li>
<li>  type MyPoint int</li>
</ul>
<h2 id="扩展和复用"><a href="#扩展和复用" class="headerlink" title="扩展和复用"></a>扩展和复用</h2><p>复合：</p>
<p>匿名类型嵌入：</p>
<p>它不是<strong>继承</strong>，如果我们把“内部 struct”看作父类，把“外部 struct” 看作子类，会发现如下问题：</p>
<ul>
<li>  不支持子类替换</li>
<li>子类并不是真正继承了父类的方法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">type Pet struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *Pet) Speak() &#123;</span><br><span class="line">    fmt.Print(&quot;...&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *Pet) SpeakTo(string string) &#123;</span><br><span class="line">    p.Speak()</span><br><span class="line">    fmt.Println(&quot; &quot;, string)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type Dog struct &#123;</span><br><span class="line">    p *Pet</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (d *Dog) Speak() &#123;</span><br><span class="line">    fmt.Print(&quot;Wang!&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (d *Dog) SpeakTo(string string) &#123;</span><br><span class="line">    d.p.SpeakTo(string)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestDog(t *testing.T) &#123;</span><br><span class="line">    dog := new(Dog)</span><br><span class="line">    dog.SpeakTo(&quot;Gao&quot;) // 没有打印 Wang! 需要改动 dog中SpeakTo方法</span><br><span class="line">    /** 运行结果：</span><br><span class="line">    === RUN   TestDog</span><br><span class="line">    ...  Gao</span><br><span class="line">    --- PASS: TestDog (0.00s)</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="多态与空接口"><a href="#多态与空接口" class="headerlink" title="多态与空接口"></a>多态与空接口</h2><p>多态：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">type Code string // 自定义类型</span><br><span class="line"></span><br><span class="line">type Programmer interface &#123;</span><br><span class="line">    WriteHelloWorld() Code</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type GoProgrammer struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">type PhpProgrammer struct &#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (g *GoProgrammer) WriteHelloWorld() Code &#123;</span><br><span class="line">    return &quot;fmt.Println(\&quot;Hello World\&quot;)&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func (p *PhpProgrammer) WriteHelloWorld() Code &#123;</span><br><span class="line">    return &quot;echo \&quot;Hello World\&quot;&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func writeFirstProgram(p Programmer) &#123;</span><br><span class="line">    fmt.Printf(&quot;%T %v\n&quot;, p, p.WriteHelloWorld())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestPolymorphism(t *testing.T) &#123;</span><br><span class="line">    goProg := new(GoProgrammer)</span><br><span class="line">    phpProg := new(PhpProgrammer)</span><br><span class="line">    writeFirstProgram(goProg)</span><br><span class="line">    writeFirstProgram(phpProg)</span><br><span class="line">    /** 运行结果</span><br><span class="line">    === RUN   TestPolymorphism</span><br><span class="line">    *test.GoProgrammer fmt.Println(&quot;Hello World&quot;)</span><br><span class="line">    *test.PhpProgrammer echo &quot;Hello World&quot;</span><br><span class="line">    --- PASS: TestPolymorphism (0.00s)</span><br><span class="line">     */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>空接口与断言：</p>
<ul>
<li>  空接口可以表示任何类型</li>
<li>通过断言来将空接口转换为制定类型  <code>v, ok := p.(int) // ok=true 时为转换成功</code></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">func DoSomething(p interface&#123;&#125;) &#123;</span><br><span class="line">    // 如果传入的参数能被断言成一个整型</span><br><span class="line">    if i, ok := p.(int); ok &#123;</span><br><span class="line">        fmt.Println(&quot;Integer&quot;, i)</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 如果传入的参数能被断言成一个字符型</span><br><span class="line">    if s, ok := p.(string); ok &#123;</span><br><span class="line">        fmt.Println(&quot;String&quot;, s)</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    fmt.Println(&quot;Unknow Type&quot;)</span><br><span class="line"></span><br><span class="line">    // 也可以通过switch来判断</span><br><span class="line">    /*switch v := p.(type) &#123;</span><br><span class="line">    case int:</span><br><span class="line">        fmt.Println(&quot;Integer&quot;, v)</span><br><span class="line">    case string:</span><br><span class="line">        fmt.Println(&quot;String&quot;, v)</span><br><span class="line">    default:</span><br><span class="line">        fmt.Println(&quot;Unknow Type&quot;)</span><br><span class="line">    &#125;*/</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func TestEmptyInterfaceAssertion(t *testing.T) &#123;</span><br><span class="line">    DoSomething(10)</span><br><span class="line">    DoSomething(&quot;gaobinzhan&quot;)</span><br><span class="line">    /** 运行结果</span><br><span class="line">    === RUN   TestEmptyInterfaceAssertion</span><br><span class="line">    Integer 10</span><br><span class="line">    String gaobinzhan</span><br><span class="line">    --- PASS: TestEmptyInterfaceAssertion (0.00s)</span><br><span class="line">    */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Go接口最佳实践：</p>
<p><img src="http://qiniu.gaobinzhan.com/2020/05/17/f8ba0c6a8e958.png"></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Go面向对象编程</p><p><a href="https://stitch.cn/2020/09/20/go面向对象编程.html">https://stitch.cn/2020/09/20/go面向对象编程.html</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>stitch</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-09-20</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2021-10-01</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><!--!--></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/09/20/swoole%E5%A4%84%E7%90%86tcp%E7%B2%98%E5%8C%85%E9%97%AE%E9%A2%98%EF%BC%88%E9%9D%A2%E5%90%91%E8%BF%87%E7%A8%8B%EF%BC%89.html"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Swoole处理Tcp粘包问题（面向过程）</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/09/20/%EF%BC%88%E8%BD%AC%E8%BD%BD%EF%BC%89%E4%BA%8C%E5%8D%81%E5%B2%81%E5%87%BA%E5%A4%B4%EF%BC%8C%E4%BD%A0%E4%B8%80%E6%97%A0%E6%89%80%E6%9C%89%EF%BC%8C%E4%BD%86%E4%BD%A0%E5%8D%B4%E6%8B%A5%E6%9C%89%E4%B8%80.html"><span class="level-item">（转载）二十岁出头，你一无所有，但你却拥有一切</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><!--!--></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="https://avatars.githubusercontent.com/u/44792981?s=400&amp;u=273c6d745868dcacf7889e5da4499b751179f773&amp;v=4" alt="Stitch"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Stitch</p><p class="is-size-6 is-block">Alien monster</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Alien</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">45</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">0</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Stitch-June" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Stitch-June"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/uncategorized/"><span class="level-start"><span class="level-item">uncategorized</span></span><span class="level-end"><span class="level-item tag">45</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2021/04/"><span class="level-start"><span class="level-item">四月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2021/03/"><span class="level-start"><span class="level-item">三月 2021</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">37</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2019/10/"><span class="level-start"><span class="level-item">十月 2019</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li></ul></div></div></div><!--!--><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-04-01T00:40:00.000Z">2021-04-01</time></p><p class="title"><a href="/2021/04/01/redis-%E9%93%BE%E8%A1%A8.html">Redis-链表</a></p><p class="categories"><a href="/categories/uncategorized/">uncategorized</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2021-03-31T01:09:00.000Z">2021-03-31</time></p><p class="title"><a href="/2021/03/31/redis-%E7%AE%80%E5%8D%95%E5%8A%A8%E6%80%81%E5%AD%97%E7%AC%A6%E4%B8%B2sds.html">Redis-简单动态字符串SDS</a></p><p class="categories"><a href="/categories/uncategorized/">uncategorized</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-09-27T12:28:48.000Z">2020-09-27</time></p><p class="title"><a href="/2020/09/27/go%E5%B8%B8%E7%94%A8%E9%9B%86%E5%90%88.html">Go常用集合</a></p><p class="categories"><a href="/categories/uncategorized/">uncategorized</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-09-27T12:15:12.000Z">2020-09-27</time></p><p class="title"><a href="/2020/09/27/redis%E4%B9%8B%E4%B8%BB%E4%BB%8E%E9%97%AE%E9%A2%98%E5%A4%84%E7%90%86.html">redis之主从问题处理</a></p><p class="categories"><a href="/categories/uncategorized/">uncategorized</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-09-23T09:21:33.000Z">2020-09-23</time></p><p class="title"><a href="/2020/09/23/go%E5%B8%B8%E8%A7%81%E6%9E%B6%E6%9E%84%E6%A8%A1%E5%BC%8F%E7%9A%84%E5%AE%9E%E7%8E%B0.html">Go常见架构模式的实现</a></p><p class="categories"><a href="/categories/uncategorized/">uncategorized</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">Stitch&#039;s Blog</a><p class="is-size-7"><span>&copy; 2021 stitch</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>