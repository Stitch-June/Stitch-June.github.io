---
title: Swoole协程模式实现Mysql连接池
tags: []
id: '51'
categories:
  - - uncategorized
date: 2020-09-20 19:23:04
---

\[TOC\]

## 连接池定义

永不断开，要求我们的这个程序是一个常驻内存的程序。数据库连接池`（Connection pooling）`是程序启 动时建立足够的数据库连接，并将这些连接组成一个连接池，由程序动态地对池中的连接进行申请，使用，释放。

## 为什么需要连接池？

当并发量很低的时候，连接可以临时建立，但当服务吞吐达到几百、几千的时候，频繁 `建立连接 Connect` 和 `销毁连接 Close` 就有可能会成为服务的一个瓶颈，那么当服务启动的时候，先建立好若干个连接并存放于一个队列中，当需要使用时从队列中取出一个并使用，使用完后再反还到队列去，而对这个队列数据结构进行维护的，就是连接池。

## 使用channel实现连接池

> 必须在协程模式下

Pool.php